
# User's Guide


## Requirements
- [DotNet 8.0 Runtime](https://dotnet.microsoft.com/download).


### UI Mode
Just running the app will show the UI with a form to fill in all required configuration.  
The configuration is automatically saved in the `AppSettings.json` file when the app closes.


### CMD Console Mode
This app can be used from the command-line, 
if a command-line parameter is found like `--CopyToken`, then the app will run in console mode instead of launching the UI.
Example:  
```cmd
Authenticator.exe --CopyToken -M XXXXXXXXXXXX
Authenticator.exe --CopyToken --MfaGeneratorSecretKey XXXXXXXXXXXX
```
If the app is already configured in the `AppSettings.json` file with a valid "`MfaGeneratorSecretKey`" value, then you don't need to specify the `-M` parameter:
```cmd
Authenticator.exe -CopyToken
```

> Running in command-line generates a log file named `Authenticator.log` in the same directory as the app,
> this log is used to debug what the app is doing and to be able to visualize possible error output.


#### CMD: Copy token
You can run the app with the CMD argument parameter `--CopyToken` 
and it will automatically generate and copy the token to the clipboard and then close the app instantly.


## Configuration
The configuration is stored in a file named `AppSettings.json` placed next to the application.  

 Config parameter      | Short Name | Description
-----------------------|------------|---------------------------------------------------------------------------------
 MfaGeneratorSecretKey |    -M      | MFA generator secret key used when configuring.
 Token                 | -T or -C   | MFA personal user token (one time token).


## MFA Configuration for Microsoft
or Microsoft's accounts, add a new sign-in method to your account security configuration:  
 - Go to your account security config ([here](https://mysignins.microsoft.com/security-info))  
 - "sign-in method"  
 - "Authenticator app TOTP"  
 - "I want to use a different authenticator app"  
 - "Can't scan imange? button"  
 - Copy the webpage's "`Secret key`" into the Authenticator's "Authenticator secret key" field to start generating tokens with it. The other fields are not needed.  
Now when Microsoft ask you to login you can select:
"Use a different verification option" > "Use verification code from mobile app or hardware token" and use the tokens generated by this app.

